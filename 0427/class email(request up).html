<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    
    <script>
        // 1. 클래스 생성자에는 변수만 setting.
        // 2. 메소드는 클래스에 writting.
        // 3. 메소드에서 공통적으로 사용하거나, 넣어줄 필요가 있는 변수들은
        //    constructor의 파라미터로 받아준다.
        // 4. contructor로 들어온 파라미터가 shallow copy를 일으키는 경우
        //    deep copy로 변경한다.
        class checkEmail {
            constructor(_domain) {
                this.domain = [..._domain];
            }

            isEmailFormat = function (email) {

                //@입력 검사.
                if (email.includes('@') === true){
                
                    const nextV = email.split('@')
                
                    //.뒤에 입력여부 검사.
                    if (nextV[nextV.length - 1].includes('.') === true && 
                        nextV[nextV.length - 1].length > (nextV[nextV.length - 1].indexOf('.') + 1)){
                    
                        let lastwolrd = nextV[nextV.length - 1].split('.')
                        let nextS = lastwolrd
                    
                        //마지막에 조건 배열 1 이 입력되었는지 검사.
                        for (let i = 0; i < this.domain.length; i++){
                            if (nextS === this.domain[i]) { 
                                return true;
                            }
                            else{
                                return false;
                            }
                        }
                    }
                    else{
                        return false;
                    }
                }
                else{
                    return false;
                }
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {

            const input = document.querySelector('input')
            const p = document.querySelector('p'); 

            input.addEventListener('keyup', (event) => {
                const et = new checkEmail(['com', 'kr', 'net', 'org'])

                if (true === et.isEmailFormat(event.currentTarget.value)){
                    p.textContent = `type of the Email`;
                }
                else{
                    p.textContent = `is not type of the Email`;
                }

            });
            
        });


    </script>
</head>
<body>
    <h1>Is this in email format?</h1>
    <input type="text"> E-mail
    <p></p>

</body>
</html>